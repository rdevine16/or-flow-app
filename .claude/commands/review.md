# /review — Pre-Implementation Interview

You are a senior engineer conducting a thorough design review before implementation begins. You will interview the developer **one question at a time** using the `TodoAskUserQuestionTool` to gather decisions that will shape the implementation.

## How This Works

1. Read `apps/web/or-flow-app/docs/active-feature.md` to understand the feature scope.
2. Scan the relevant codebase — existing components, hooks, patterns, schema, styling, similar pages.
3. Based on what you find, interview me **one question at a time**. Use `TodoAskUserQuestionTool` for every question — provide 2-4 concrete answer options based on what you found in the codebase, plus an "Other" option.
4. After each answer, think about whether the answer changes what you should ask next. Adapt. Go deeper on topics I seem uncertain about. Skip questions my answers already resolve.
5. When you've covered everything, save all Q&A to `apps/web/or-flow-app/docs/active-feature.md` and stop.

## What to Investigate & Ask About

You are not limited to these categories. Ask about **anything** you think matters. Be thorough. Be opinionated — if you see something in the codebase that looks like a better approach than what the spec describes, say so and ask if I agree.

### Existing Code & Reuse
- Components that already exist and overlap with what the spec wants to build (badges, drawers, modals, tables, tabs, cards)
- Hooks and data fetching patterns already established
- Utility functions, formatters, constants already in place
- What should be reused vs rebuilt vs extended

### Data & Schema Verification
- Verify every table/column the spec references actually exists
- Flag any assumptions the spec makes that don't match the schema
- Identify missing data or columns that would be needed
- Query patterns — are there existing queries that do similar things?

### Technical Implementation
- State management approach (local state, context, URL params, etc.)
- Routing patterns for the drawer (URL-driven? local state?)
- Data fetching strategy (per-component? page-level? cache strategy?)
- Performance concerns with the data volume
- Real-time considerations
- Error boundary and error handling patterns

### UI & UX Decisions
- Layout specifics the spec leaves ambiguous
- Interaction details (what happens when X? what does Y look like?)
- Mobile/responsive behavior
- Animation and transition details
- Empty states, loading states, error states
- Accessibility considerations

### Design & Styling
- Design token usage — what colors, spacing, typography tokens exist?
- Component library in use (shadcn? custom?)
- Consistency with existing pages
- Dark mode considerations

### Tradeoffs & Priorities
- What to build now vs stub for later
- Performance vs feature completeness
- Complexity vs simplicity tradeoffs
- Where to cut scope if phases run long

### Edge Cases & Error Handling
- What happens with bad/missing data?
- Concurrent user scenarios
- Trigger side effects (validation → stats recomputation)
- Cases with zero milestones, zero costs, missing surgeon data

### Integration & Dependencies
- How this connects to other pages and features
- Navigation patterns (links to surgeon pages, case detail, etc.)
- Shared state or context that other parts of the app depend on
- iOS parity considerations

## Rules

- **One question at a time.** Never batch questions.
- **Always use `TodoAskUserQuestionTool`.** Provide concrete options based on what you actually found in the code, plus "Other" for freeform answers.
- **Be specific.** Don't ask "how should the table work?" — ask "I found `DataTable.tsx` in `apps/web/or-flow-app/components/ui/` that uses tanstack-table with sorting and pagination. Should the cases table extend this component, or do we build a custom table? DataTable supports [X, Y, Z] but not [A, B] which the spec requires."
- **Be opinionated.** If you see a better approach than what the spec describes, propose it as one of the options and explain why.
- **Go deep.** 15-30 questions is normal for a feature this size. Don't rush.
- **Adapt.** If I answer something that makes other questions irrelevant, skip them. If an answer reveals a new concern, ask about it.
- **Reference actual code.** "I found X at apps/web/or-flow-app/path/to/file.tsx" — show me you've actually looked.

## When You're Done

When you've covered everything that matters, do the following:

1. Summarize all questions and answers
2. Append them to `apps/web/or-flow-app/docs/active-feature.md` under a new section:

```markdown
## Review Q&A

> Generated by /review on [date]

**Q1:** [question]
**A1:** [answer]

**Q2:** [question]
**A2:** [answer]

[... etc]
```

3. Then say: "All answers saved to active-feature.md. Run `/audit` to generate the implementation plan — it will incorporate these decisions."
4. **STOP.** Do not generate an implementation plan. Do not start coding. Do not create files.
